## 17 변경 가능성을 최소화하라

### 불변 클래스 규칙

1. 객체의 상태를 변경하는 메서드를 제공하지 않습니다.
2. 클래스를 확장할 수 없도록 합니다.
3. 모든 필드를 final로 선언합니다.
4. 모든 필드를 private으로 선언합니다.
5. 자신 외에는 내부의 가변 컴포넌트에 접근할 수 없도록 합니다.

### 불변 객체 장점

-   스레드가 안전하여 따로 동기화가 필요 없습니다.
-   불변 객체들을 구성요소로 사용하면, 불변식을 유지하기가 쉬워집니다.
-   불변 객체는 실패 원자성을 제공합니다.

### 불변 객체 단점

-   값이 다르면 반드시 독립된 객체로 만들어야 합니다.

### 자신을 상속하지 못하게 하는 불변 클래스를 만드는 방법

1. final 클래스로 선언하기
2. 모든 생성자를 private 혹은 package-private로 만들고, public 정적 팩토리 메소드를 제공하기

### 불변 클래스를 언제 만들어야 하는지

-   불변 클래스는 특정 상황에서의 잠재적 성능 저하가 유일한 단점이며, 장점이 훨씬 많습니다.
-   클래스는 꼭 필요한 경우가 아니라면 불변이어야 합니다.
-   불변으로 만들 수 없는 클래스라도 변경할 수 있는 부분을 최소한으로 줄여야 합니다.
